<%- model_class = Vat -%>
<div class="box box-primary">
  <div class="box-body">
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="col-md-1 col-sm-1 col-xs-2 text-right"><%= model_class.human_attribute_name(:rate) %></th>
            <th class="col-md-1 col-sm-1 col-xs-2"><%= model_class.human_attribute_name(:label) %></th>
            <th><%= model_class.human_attribute_name :default %></th>
            <th class="col-md-1 col-sm-2 col-xs-2"></th>
            <th class="col-md-1 col-sm-2 col-xs-2"></th>
          </tr>
        </thead>
        <tbody>
          <% if @vats.empty? %>
            <tr><td colspan="100%"><%=t 'helpers.tables.empty' %></td></tr>
          <% end %>
          <% @vats.each do |vat| %>
            <% cache vat do %>
              <tr>
                <td class="text-right"><%= best_in_place vat, :rate, url: user_vat_path(current_user, vat, format: :json) %></td>
                <td><%= best_in_place vat, :label, url: user_vat_path(current_user, vat, format: :json) %></td>
                <td>
                  <%= best_in_place vat, :default, as: :checkbox,
                                    collection: {'true': t(:checkbox_true), 'false': t(:checkbox_false) },
                                    url: user_vat_path(current_user, vat, format: :json) %>
                </td>
                <td>
                  <%= button_to edit_user_vat_path(current_user.id, vat), class: 'btn btn-default btn-xs btn-flat btn-block', method: :get do %>
                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    <span class="hidden-xs">
                      <%=t 'helpers.links.edit' %>
                    </span>
                  <% end %>
                </td>
                <td>
                  <%= button_to user_vat_path(current_user.id, vat),
                              :method => :delete,
                              :data => { :confirm => t('helpers.links.confirm', default: 'Are you sure?') },
                              :class => 'btn btn-xs btn-danger btn-flat btn-block' do %>
                    <i class="fa fa-trash-o" aria-hidden="true"></i>
                    <span class="hidden-xs">
                      <%=t 'helpers.links.destroy' %>
                    </span>
                  <% end %>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="box-footer">
    <div class="row">
      <div class="col-xs-3 col-sm-2 col-md-1">
        <%= button_to t('helpers.links.new'),
                new_user_vat_path(current_user.id),
                method: :get,
                class: 'btn btn-primary btn-block btn-flat' %>
      </div>
    </div>
  </div>
</div>
<%- model_class = EstimateDetail -%>
<tr>
  <td>
    <% unless f.object.id.blank? %>
        <%= f.check_box :_destroy %>
    <% end %>
  </td>
  <td>
    <%= f.hidden_field :id %>
    <%= f.hidden_field :estimate_id %>
    <div class=row>
      <div class="form-group pull-left col-xs-4">
        <%= f.collection_select :service_id, Service.order(description: :asc), :id, :description,
                                { prompt: true },
                                {
                                  class: 'form-control input-sm',
                                  onchange: "INSITU.services.loadService('#{ user_services_path(current_user)}', this, '#{ f.object_name }')"
                                } %>
      </div>

      <div class="form-group pull-left col-xs-8">
        <%= f.text_field :description, { class: 'form-control input-sm', placeholder: model_class.human_attribute_name(:description) } %>
      </div>
    </div>
  </td>
  <td class=text-right>
    <div class="form-group">
      <div class="input-group">
        <%= f.number_field :quantity, {
            class: 'form-control input-sm',
            step: '0.1',
            onchange: "INSITU.services.calculateTotal('#{ f.object_name }')" } %>
        <span class="input-group-addon"><%= f.object.service.try(:unit).try(:label_short) || 'U' %></span>
      </div>
    </div>
  </td>
  <td class=text-right>
    <div class="form-group">
      <div class="input-group">
        <%= f.text_field :price, { class: 'form-control input-sm', onchange: "INSITU.services.calculateTotal('#{ f.object_name }')" } %>
        <span class="input-group-addon">€</span>
      </div>
    </div>
  </td>
  <td class=text-right>
    <div class="form-group">
      <div class="input-group">
        <%= f.number_field :discount, {
            class: 'form-control input-sm',
            step: '1',
            onchange: "INSITU.services.calculateTotal('#{ f.object_name }')" } %>
        <span class="input-group-addon">%</span>
      </div>
    </div>
  </td>
  <td class=text-right>
    <div class="form-group">
      <div class="input-group">
        <%= f.text_field :total, { class: 'form-control input-sm', readonly: true } %>
        <span class="input-group-addon">€</span>
      </div>
    </div>
  </td>
</tr>

<div class="box-body">
  <%= render partial: 'layouts/validation_errors', locals: { object: @estimate } %>

  <div class=row>
    <% unless @estimate.new_record? %>
      <div class="form-group pull-left col-xs-2">
        <%= f.label :number, :class => 'control-label' %>
        <%= input_code f %>
      </div>
    <% end %>

    <%= customer_field f, :customer_id, class: 'pull-left col-xs-4', required: true %>

    <div class="form-group pull-left col-xs-2">
      <%= f.label :date, :class => 'control-label' %>
      <div class="input-group">
        <span class="input-group-addon">
          <span class="fa fa-calendar"></span>
        </span>
        <%= f.text_field :date, class: 'form-control input-sm date', value: l(@estimate[:date]), required: true %>
      </div>
    </div>

    <div class="form-group pull-left col-xs-2">
      <%= f.label :valid_until, :class => 'control-label' %>
      <div class="input-group">
        <span class="input-group-addon">
          <span class="fa fa-calendar"></span>
        </span>
        <%= f.text_field :valid_until, class: 'form-control input-sm date', value: ldate(@estimate[:valid_until]) %>
      </div>
    </div>

    <% unless @estimate.new_record? %>
      <div class="form-group pull-left col-xs-2">
        <%= f.label :estimate_status_id, :class => 'control-label' %>
        <%= f.collection_select :estimate_status_id, EstimateStatus.order(id: :asc), :id, :locale_name,
                                { prompt: true }, { class: 'form-control input-sm', required: true } %>
      </div>
    <% end %>
  </div>

  <hr>
  <table class="table table-striped" data-no-turbolink>
    <thead>
    <tr>
      <th class=col-xs-1><%=t 'helpers.links.destroy' %></th>
      <th class=col-xs-6>
        <%=t 'activerecord.attributes.estimate/estimate_details.service_id'%>
      </th>
      <th class="col-xs-1">
        <%=t 'activerecord.attributes.estimate/estimate_details.quantity'%>
      </th>
      <th class="col-xs-1">
        <%=t 'activerecord.attributes.estimate/estimate_details.price'%>
      </th>
      <th class="col-xs-1">
        <%=t 'activerecord.attributes.estimate/estimate_details.discount'%>
      </th>
      <th class="col-xs-2">
        <%=t 'activerecord.attributes.estimate/estimate_details.total'%>
      </th>
    </tr>
    </thead>
    <tbody>
    <%= f.fields_for :estimate_details do |builder| %>
        <%= render 'estimate_details', f: builder %>
    <% end %>
    <tr>
      <td colspan="100%">
        <%= f.submit t(:add_detail), :class => 'btn btn-primary btn-flat col-xs-12', data: { disable_with: t('please_wait')} %>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<div class="box-footer">
  <% unless @estimate.new_record? %>
    <%= link_to user_estimate_path(current_user, @estimate),
                  method: :get,
                  class: 'btn btn-default btn-flat col-xs-1' do %>
        <i class="fa fa-print" aria-hidden="true">
          <%=t 'helpers.links.print' %>
        </i>
    <% end %>
  <% end %>

  <%= link_to t('helpers.links.cancel'),
              user_estimates_path(current_user), :class => 'btn btn-default btn-flat col-xs-1' %>
</div>

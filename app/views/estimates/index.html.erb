<%- model_class = Estimate -%>
<div class="box box-primary">
  <div class="box-body">
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="col-xs-1"><%= model_class.human_attribute_name(:number) %></th>
            <th class="col-xs-1"><%= model_class.human_attribute_name(:date) %></th>
            <th><%= model_class.human_attribute_name(:customer_id) %></th>
            <th class="col-xs-2"><%= model_class.human_attribute_name(:valid_until) %></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @estimates.each do |estimate| %>
            <tr>
              <td><%= estimate.number %></td>
              <td><%=ldate estimate.date %></td>
              <td><%= estimate.customer.try(:name) %></td>
              <td><%=ldate estimate.valid_until %></td>
              <td>
                <%= button_to t('helpers.links.edit'),
                            edit_user_estimate_path(current_user, estimate),
                            :class => 'btn btn-default btn-xs btn-block btn-flat',
                            method: :get %>
              </td>
              <td>
                <%= button_to t("helpers.links.destroy"),
                            user_estimate_path(current_user, estimate),
                            :method => :delete,
                            :data => { :confirm => t('helpers.links.confirm', :default => 'Are you sure?') },
                            :class => 'btn btn-xs btn-danger btn-block btn-flat' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="box-footer">
    <%= button_to t("helpers.links.new"),
            new_user_estimate_path(current_user),
            method: :get,
            :class => 'btn btn-primary btn-flat btn-block' %>
  </div>
</div>
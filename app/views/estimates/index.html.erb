<%- model_class = Estimate -%>
<div class="box box-primary">
  <div class="box-body">
    <%= form_for_filterrific @filterrific do |f| %>
        <div class="row">
          <div class="form-group col-xs-2">
            <%= f.label :with_number, model_class.human_attribute_name(:number), class: 'control-label' %>
            <%= f.text_field :with_number, class: 'filterrific-periodically-observed form-control input-sm' %>
          </div>

          <div class="form-group col-xs-2">
            <%= f.label :with_date_ge, t('filterrific.starting_from_date'), :class => 'control-label' %>
            <div class="input-group date">
            <span class="input-group-addon">
              <span class="glyphicon glyphicon-calendar"></span>
            </span>
              <%= f.text_field :with_date_ge, class: 'form-control input-sm date filterrific-periodically-observed' %>
            </div>
          </div>

          <%= customer_field f, :with_customer,
                             label: model_class.human_attribute_name(:customer_id),
                             class: 'col-xs-2',
                             filterrific: true %>

          <div class="form-group col-xs-2">
            <%= f.label :sorted_by, t('filterrific.sorted_by'), :class => 'control-label' %>
            <%= f.select :sorted_by, @filterrific.select_options[:sorted_by], {}, { class: 'form-control input-sm' } %>
          </div>

          <%= link_to t('filterrific.reset_filters'), reset_filterrific_url, class: 'btn btn-default pull-down' %>

          <%# add an automated spinner to your form when the list is refreshed %>
          <%= render_filterrific_spinner %>
        </div>
    <% end %>

    <%= render partial: 'list', locals: { estimates: @estimates } %>
  </div>
  <div class="box-footer">
    <%= button_to t("helpers.links.new"),
            new_user_estimate_path(current_user),
            method: :get,
            :class => 'btn btn-primary btn-flat btn-block' %>
  </div>
</div>